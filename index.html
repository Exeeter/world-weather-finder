<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="manifest" href="site.webmanifest">
</head>
<body>
    <div class="container text-center mt-2">
        <u><h1>World Weather Finder</h1></u>
        <div class="card">
            <div class="card-body">
                <input placeholder="Enter City Name" class="form-control" id="city">
                <br>
                <button type="button" class="btn btn-success" onclick="fetch_data()">Get Weather Data</button>
                <br>
                <div id="result">
                    
                </div>
            </div>
        </div>
    </div>
    <script>
        function toUpper(str) {
        return str
            .toLowerCase()
            .split(' ')
            .map(function(word) {
                return word[0].toUpperCase() + word.substr(1);
            })
            .join(' ');
        }
    </script>
    <script>
        function fetch_data()
        {
            var cityName = document.getElementById('city').value
            if(cityName === "")
            {
                alert('Enter City Name')
            }
            var url = 'https://api.openweathermap.org/data/2.5/weather?q='+cityName+'&appid=dd2a72cbc1b1213a00823f388d6edb10&units=imperial'
            fetch(url)
            .then(response => response.json())
            .then(data => {
                var resp_code = data['cod']
                if(resp_code === '404')
                {
                    alert('City Not Found')
                }
                else
                {
                    var cityTemp = data['main']['temp']
                    var tempDesc = data['weather']['0']['description']
                    var icon = data['weather']['0']['icon']
                    var icon_url = 'http://openweathermap.org/img/wn/'+icon+'@2x.png'
                    document.getElementById('result').innerHTML = 
                    `<h3>`+toUpper(tempDesc)+`</h3>`+`<img src=`+icon_url+`>`+`<br>`+`<h3>The Temperature in `+cityName+` is `+cityTemp+`&deg;F</h3>`
                }
            })
        }
    </script>
</body>
</html>